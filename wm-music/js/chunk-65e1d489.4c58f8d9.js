(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65e1d489"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"2d3b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.change(t.keywords)}}},[s("div",{staticClass:"biginput"},[s("div",{staticClass:"input"},[s("i"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"搜索歌曲，歌手， 专辑"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value)},function(e){t.inputing=!0}]}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"close",on:{click:t.close}},[s("i")])])])]),s(t.search,{tag:"component",attrs:{keywords:t.keywords},on:{change:t.change}}),"HotSearch"==t.search?s("div",{staticClass:"searchHistory"},[t.history.length>0?s("ul",t._l(t.history,(function(e,n){return s("li",{key:n},[s("i"),s("div",[s("span",{staticClass:"musicName",on:{click:function(s){return t.change(e)}}},[t._v(t._s(e))]),s("span",{staticClass:"delete iconfont icon-guanbi",on:{click:function(s){return t.deleteHistory(e)}}})])])})),0):t._e()]):t._e()],1)},i=[],o=(s("841c"),s("ac1f"),s("a434"),s("1276"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"hotSearch"},[s("p",[t._v("热门搜索")]),s("ul",t._l(t.hotSearch,(function(e,n){return s("li",{key:n,on:{click:function(s){return t.$emit("change",e.first)}}},[t._v(" "+t._s(e.first)+" ")])})),0)])])}),r=[],a={name:"HotSearch",data:function(){return{hotSearch:[]}},created:function(){var t=this;this.$axios.get("/search/hot").then((function(e){t.hotSearch=e.data.result.hots}))}},c=a,u=(s("d386"),s("2877")),l=Object(u["a"])(c,o,r,!1,null,"ee4c04e2",null),h=l.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"suggest"},[s("div",{staticClass:"search"},[t._v('搜索:"'+t._s(t.keywords)+'"')]),s("ul",[t.suggestList.artists?t._l(t.suggestList.artists,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.$emit("change",e.name)}}},[s("i"),s("span",[t._v(t._s(e.name))])])})):t._e(),t.suggestList.albums?t._l(t.suggestList.albums,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.$emit("change",e.name)}}},[s("i"),s("span",[t._v(t._s(e.name))])])})):t._e(),t.suggestList.songs?t._l(t.suggestList.songs,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.$emit("change",e.name)}}},[s("i"),s("span",[t._v(t._s(e.name))])])})):t._e()],2)])},g=[],f={name:"SearchSuggest",props:["keywords"],data:function(){return{suggestList:{}}},created:function(){this.loadSuggest(this.keywords)},watch:{keywords:function(t){this.loadSuggest(t)}},methods:{loadSuggest:function(t){var e=this;this.$axios.get("http://musicapi.leanapp.cn/search/suggest?keywords= "+t+"&type=mobile").then((function(t){console.log(t);var s=t.data.result;e.suggestList=s}))}}},m=f,p=(s("e358"),Object(u["a"])(m,d,g,!1,null,"c971fc6a",null)),w=p.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result"},[s("div",{staticClass:"resultnow"},[t._v("搜索结果:"+t._s(t.keywords))]),s("ul",t._l(t.result,(function(e,n){return s("li",{key:n},[s("SongItem",{attrs:{item:e,keywords:t.keywords}})],1)})),0),t.showLoading?s("Loading"):t._e(),s("div",{staticClass:"loadingmore"},[t._v(t._s(t.momore?"没有更多了":"正在加载..."))])],1)},v=[],k=(s("99af"),s("3a5e")),_=s("cf7e"),S={name:"SearchResult",props:["keywords"],data:function(){return{result:[],page:1,showLoading:!0,momore:!1}},created:function(){this.loadSearch(),window.addEventListener("scroll",this.handleScroll)},components:{SongItem:_["a"],Loading:k["a"]},methods:{loadSearch:function(){var t=this,e=30*(this.page-1);this.$axios.get("http://musicapi.leanapp.cn/search?keywords="+this.keywords+"&type=1&offset="+e).then((function(e){t.result=t.result.concat(e.data.result.songs),t.showLoading=!1}))},handleScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;if(t+document.documentElement.clientHeight==document.documentElement.scrollHeight){if(this.page++,this.page>10)return this.momore=!0,!1;this.loadSearch(),this.showLoading=!0}},destoryed:function(){window.removeEventListener("scroll",this.handleScroll,!1)}}},b=S,x=(s("3617"),Object(u["a"])(b,y,v,!1,null,"3c92df78",null)),H=x.exports,L={name:"Recommend",data:function(){return{search:"HotSearch",keywords:"",inputing:!1,isshow:!1,history:[]}},created:function(){},methods:{change:function(t){if(this.keywords=t,this.inputing=!1,this.search="SearchResult",this.history.length>0){var e=this.history.indexOf(t);-1!=e&&this.history.splice(e,1),this.history.push(this.keywords)}else this.history.push(this.keywords);window.localStorage.setItem("searchHistory",this.history),this.getHistory()},close:function(){this.keywords=""},getHistory:function(){window.localStorage.getItem("searchHistory")&&(this.history=window.localStorage.getItem("searchHistory").split(","))},deleteHistory:function(t){var e=this.history.indexOf(t);this.history.splice(e,1),window.localStorage.setItem("searchHistory",this.history),this.getHistory()}},watch:{keywords:function(t){""==t?(this.search="HotSearch",this.isshow=!1):this.inputing?(this.search="SearchSuggest",this.isshow=!0):this.isshow=!0}},components:{HotSearch:h,SearchSuggest:w,SearchResult:H}},C=L,$=(s("3637"),Object(u["a"])(C,n,i,!1,null,"6ac09d01",null));e["default"]=$.exports},3617:function(t,e,s){"use strict";s("b22c")},3637:function(t,e,s){"use strict";s("47c8")},"47c8":function(t,e,s){},"841c":function(t,e,s){"use strict";var n=s("d784"),i=s("825a"),o=s("1d80"),r=s("129f"),a=s("14c3");n("search",1,(function(t,e,s){return[function(e){var s=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,s):new RegExp(e)[t](String(s))},function(t){var n=s(e,t,this);if(n.done)return n.value;var o=i(t),c=String(this),u=o.lastIndex;r(u,0)||(o.lastIndex=0);var l=a(o,c);return r(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},a805:function(t,e,s){},b22c:function(t,e,s){},d386:function(t,e,s){"use strict";s("a805")},e358:function(t,e,s){"use strict";s("eeeb")},eeeb:function(t,e,s){}}]);
//# sourceMappingURL=chunk-65e1d489.4c58f8d9.js.map